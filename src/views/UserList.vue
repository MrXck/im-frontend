<template>    <div class="list">        <div class="user-list">            <div class="user">                <div class="search">                    <div class="search-input">                        <i class="fa fa-search"></i>                        <input type="text" placeholder="搜索">                    </div>                    <div class="button">                        <i class="fa fa-plus-square-o" @click="dialogTableVisible=true"></i>                    </div>                </div>                <div class="users">                    <div class="item">                        <span>新的朋友</span>                        <UsersItem avatar="" username="新的朋友" toPath="/users/newFriends"></UsersItem>                    </div>                    <span>通讯录</span>                    <UsersItem v-for="item in userList" :avatar="item.avatar" :username="item.username"                               :toPath="'/users/' + item.id" :synopsis="item.synopsis" :key="item.id"></UsersItem>                </div>            </div>        </div>        <router-view/>        <el-dialog title="添加好友" :visible.sync="dialogTableVisible">            <el-form :inline="true" @submit.native.prevent>                <el-form-item label="手机号">                    <el-input v-model="phone" autocomplete="off" placeholder="请输入手机号"></el-input>                </el-form-item>                <el-form-item>                    <el-button type="primary" @click="find">查询</el-button>                </el-form-item>            </el-form>            <el-table size="small" current-row-key="id" :data="gridData" stripe highlight-current-row>                <el-table-column prop="username" label="用户名" align="center"></el-table-column>                <el-table-column prop="phone" label="电话" align="center"></el-table-column>                <el-table-column label="操作" align="center">                    <template slot-scope="scope">                        <el-button type="primary" size="mini" @click="addFriend(scope.row)">添加</el-button>                    </template>                </el-table-column>            </el-table>        </el-dialog>    </div></template><script>import UsersItem from '@/components/UsersItem'import request from '@/utils/request'import eventBus from '@/utils/eventBus'export default {    name: 'UserList',    data(){        return {            userList: [],            dialogTableVisible: false,            gridData: [],            phone: ''        }    },    components: {        UsersItem    },    methods: {        find(e){            request.post('/user/find', {phone: this.phone}).then((data)=>{                if (data.data.code === 0) {                    this.gridData = data.data.data                } else {                    this.$message.error(data.data.msg)                }            })        },        addFriend(item){            let user = JSON.parse(localStorage.getItem("user"))            if(item.id === user.id){                this.$message.error("不可以加自己")            }            request.post("/addressBook/add/" + item.id).then((data)=>{                if (data.data.code === 0) {                } else {                    this.$message.error(data.data.msg)                }            })        }    },    created() {        request.get("/addressBook/list").then((data)=>{            if (data.data.code === 0) {                this.userList = data.data.data            } else {                this.$message.error(data.data.msg)            }        })        eventBus.$on('addAddressBook', val =>{            this.userList = [val, ...this.userList]        })    }}</script><style scoped>.list{    display: flex;}.user-list{    display: flex;}.user{    height: 648px;    width: 240px;    display: flex;    flex-direction: column;    border: 1px solid #d4d4d5;}.search {    background-color: #f5f5f6;    display: flex;    justify-content: space-around;    width: 100%;}.search div {    margin-top: 20px;    margin-left: 10px;    margin-bottom: 10px;    overflow: hidden;}.search .search-input {    background-color: #e2e2e2;    border-radius: 4px;    flex: 3;}.search .search-input i {    padding: 0 5px;}input {    outline: none;    border: 0;    background-color: #e2e2e2;    height: 25px;    width: 130px;}.button i {    cursor: pointer;    font-size: 27px;    padding-right: 10px;}.fa {    color: #666666;}.fa-search {    font-size: 16px;    padding-right: 10px;}.item{    border-bottom: 1px solid #d4d4d5;}.users {    background-color: #ebe9e7;    width: 240px;    height: 593px;    overflow-y: auto;}.users span{    font-size: 12px;    color: #999999;    padding-left: 10px;}.users::-webkit-scrollbar { /*滚动条整体样式*/    width: 4px; /*高宽分别对应横竖滚动条的尺寸*/    height: 4px;    scrollbar-arrow-color: red;}.users::-webkit-scrollbar-thumb { /*滚动条里面小方块*/    border-radius: 5px;    -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);    background: rgba(0, 0, 0, 0.2);    scrollbar-arrow-color: red;}.users::-webkit-scrollbar-track { /*滚动条里面轨道*/    -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);    border-radius: 0;    background: rgba(0, 0, 0, 0);}</style>