<template>    <div class="nav">        <img :src="avatar" alt="头像" class="avatar">        <div class="nav-list">            <div class="top">                <router-link class="fa el-icon-chat-dot-round" to="/history"></router-link>                <router-link class="fa fa-user-o" to="/users"></router-link>                <router-link class="fa el-icon-chat-square" to="/chat"></router-link>            </div>            <div class="bottom">                <i class="fa el-icon-setting" @click="dialogFormVisible = true"></i>            </div>        </div>        <el-dialog class="dialog" title="修改个人信息" :visible.sync="dialogFormVisible">            <el-form :model="userInfo">                <el-form-item label="用户名" :label-width="formLabelWidth">                    <el-input placeholder="不输入则不修改" v-model="userInfo.username" autocomplete="off"></el-input>                </el-form-item>                <el-form-item label="密码" :label-width="formLabelWidth">                    <el-input placeholder="不输入则不修改" v-model="userInfo.password" autocomplete="off"></el-input>                </el-form-item>                <el-form-item label="简介" :label-width="formLabelWidth">                    <el-input placeholder="不输入则不修改" v-model="userInfo.synopsis" autocomplete="off"></el-input>                </el-form-item>                <el-form-item label="手机号" :label-width="formLabelWidth">                    <el-input placeholder="不输入则不修改" v-model="userInfo.phone" autocomplete="off"></el-input>                </el-form-item>                <el-form-item label="头像" :label-width="formLabelWidth">                    <el-upload                        drag                        class="avatar-uploader"                        action="http://127.0.0.1:8088/file/uploadAvatar"                        :show-file-list="false"                        :on-success="handleAvatarSuccess"                        :before-upload="beforeAvatarUpload">                        <img v-if="imageUrl" :src="imageUrl" class="userAvatar">                        <div v-else>                            <i class="el-icon-upload"></i>                            <div class="el-upload__text">将文件拖到此处，或<em>点击上传</em></div>                        </div>                        <div class="el-upload__tip" slot="tip">只能上传jpg/png文件，且不超过2MB</div>                    </el-upload>                </el-form-item>            </el-form>            <div slot="footer" class="dialog-footer">                <el-button @click="dialogFormVisible = false">取 消</el-button>                <el-button type="primary" @click="update">确 定</el-button>            </div>        </el-dialog>    </div></template><script>import request from '@/utils/request'export default {    name: 'Left',    data(){        return {            avatar: '',            userInfo: {                username: '',                password: '',                avatar: '',                phone: '',                synopsis: '',            },            dialogFormVisible: false,            formLabelWidth: '100px',            imageUrl: ''        }    },    methods: {        handleAvatarSuccess(res, file) {            this.userInfo.avatar = res.data            this.imageUrl = URL.createObjectURL(file.raw);        },        beforeAvatarUpload(file) {            const isJPG = file.type === 'image/jpeg';            const isPNG = file.type === 'image/png';            const isLt2M = file.size / 1024 / 1024 < 2;            if (!isJPG && !isPNG) {                this.$message.error('上传头像图片只能是 JPG / PNG 格式!');            }            if (!isLt2M) {                this.$message.error('上传头像图片大小不能超过 2MB!');            }            return (isJPG || isPNG) && isLt2M;        },        update(){            this.dialogFormVisible = false            request.post('/user/update', this.userInfo).then((data)=>{                if (data.data.code === 0) {                    this.avatar = data.data.data.avatar                    localStorage.setItem("user", JSON.stringify(data.data.data))                } else {                    this.$message.error(data.data.msg)                }            })        }    },    created() {        let user = JSON.parse(localStorage.getItem("user"))        this.avatar = user.avatar        this.userInfo.username = user.username        this.imageUrl = user.avatar        this.userInfo.phone = user.phone        this.userInfo.synopsis = user.synopsis    }}</script><style scoped>.nav{    width: 55px;    height: 650px;    background-color: #2e2e2e;    border-bottom-left-radius: 2px;    border-top-left-radius: 2px;}.nav-list{    width: 35px;    padding: 10px;    height: 550px;    display: flex;    flex-direction: column;    justify-content: space-between;}.avatar{    margin-top: 15px;    height: 35px;    width: 35px;    padding: 10px;}.nav-list .fa{    color: #939394;    font-size: 22px;    cursor: pointer;    padding: 7px;    margin-top: 6px;}.nav-list .fa:hover{    color: #a8a8a8;}.button i {    cursor: pointer;}.fa {    color: #666666;}.dialog .avatar-uploader .el-upload {    border: 1px dashed #d9d9d9;    border-radius: 6px;    cursor: pointer;    position: relative;    overflow: hidden;}.dialog .avatar-uploader .el-upload:hover {    border-color: #409EFF;}.dialog .avatar-uploader-icon {    font-size: 28px;    color: #8c939d;    width: 178px;    height: 178px;    line-height: 178px;    text-align: center;}.dialog .userAvatar {    max-width: 100%;    max-height: 100%;    display: block;}</style>