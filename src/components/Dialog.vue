<template>    <div class="dialog">        <div class="operation">            <div class="left">                <label class="fa fa-file" aria-hidden="true" for="file"></label>                <input type="file" hidden id="file" @change="upload">            </div>            <div class="right">            </div>        </div>        <div class="input">            <textarea v-model="message" @keyup.enter="sendToServer"></textarea>            <el-button size="small" type="success" @click="sendToServer">发送</el-button>        </div>    </div></template><script>import request from '@/utils/request'import eventBus from '@/utils/eventBus'import socket from '@/utils/Socket'export default {    name: 'Dialog',    props: ['id'],    data(){        return {            message: ''        }    },    methods: {        upload(e){            let formData = new FormData();            formData.append("file", e.target.files[0])            request.post("/file/upload?toId=" + this.id, formData, {headers: {'Content-Type': 'multipart/form-data'}}).then((data)=>{                if (data.data.code === 0) {                    this.send(data.data.data)                } else {                    this.$message.error(data.data.msg)                }            })        },        send(val){            eventBus.$emit('addMessage', val)        },        sendToServer(){            if (this.message !== '') {                let _this = this                let message = {                    toId: _this.id,                    message: _this.message,                    type: 2,                    time: new Date(),                    Authorization: localStorage.getItem("token")                }                socket.send(JSON.stringify(message))                this.send(message)                this.message = ''            }else{                this.$message.error("不能发送空消息")            }        }    },    created() {        eventBus.$on('isNotFriend', val => {            console.log(val)            this.$message.error(val.message)        })    }}</script><style scoped>.dialog{    height: 143px;    padding: 10px;    border-top: 1px solid #d4d4d5;}.dialog .operation{    display: flex;    justify-content: space-between;}.dialog .operation .fa{    padding: 0 10px;    cursor: pointer;}.input{    padding: 10px;    display: flex;    flex-direction: column;    align-items: flex-end;}.input button{    margin-top: 5px;}textarea {    outline: none;    border: 0;    background-color: #f3f3f4;    height: 65px;    font-size: 14px;    width: 100%;    resize: none;}</style>